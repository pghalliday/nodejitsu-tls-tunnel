{
  "name": "haibu",
  "description": "A node.js application server - spawn your own node.js clouds, on your own hardware",
  "version": "0.9.7",
  "author": {
    "name": "Nodejitsu Inc.",
    "email": "info@nodejitsu.com"
  },
  "maintainers": [
    {
      "name": "bmeck",
      "email": "bradley@nodejitsu.com"
    },
    {
      "name": "indexzero",
      "email": "charlie@nodejitsu.com"
    }
  ],
  "repository": {
    "type": "git",
    "url": "http://github.com/nodejitsu/haibu.git"
  },
  "keywords": [
    "cloud computing",
    "automated deployment",
    "platform-as-a-service"
  ],
  "dependencies": {
    "cloudfiles": "0.3.3",
    "eyes": "0.1.7",
    "flatiron": "0.2.8",
    "forever-monitor": "1.1.0",
    "haibu-api": "0.9.0",
    "haibu-carapace": "0.7.1",
    "npm": "1.1.63",
    "optimist": "0.3.5",
    "pkginfo": "0.2.3",
    "request": "2.9.202",
    "semver": "1.0.13",
    "tar": "0.1.13",
    "winston": "0.6.2",
    "union": "0.3.3",
    "knox": "0.0.11"
  },
  "devDependencies": {
    "winston-loggly": "0.6.0",
    "vows": "0.6.2"
  },
  "main": "./lib/haibu",
  "bin": {
    "haibu": "./bin/haibu"
  },
  "scripts": {
    "test": "sudo vows test/**/*-test.js --isolate --spec"
  },
  "engines": {
    "node": ">= 0.8.0"
  },
  "readme": "# haibu\n\n<img src=\"https://github.com/nodejitsu/haibu/raw/master/examples/haibu.png\"/></img>\n\n*spawn your own node.js clouds, on your own hardware*\n\n# What is haibu?\n\nhaibu is the open-source [node.js](http://nodejs.org) project used at [Nodejitsu's](http://nodejitsu.com) for spawning and managing several node.js applications on a single server. It's an integral part of our production stack and is fully supported.\n\n# How does it work?\n\nhaibu (which is Japanese for \"hive\") recieves commands for spawning, transforming, and managing multiple node.js applications. Haibu utilizes a unique approach by wrapping spawned Node.js applications in a \"[Carapace](https://github.com/nodejitsu/haibu-carapace)\" which allows haibu to extend spawned applications with all sorts of additional functionaltiy. When haibu wraps a node.js application in a \"carapace\" the application becomes a \"drone\".\n\nThis approach allows haibu to directly interact with node.js applications and add all sorts of additional functionality. [Carapace](https://github.com/nodejitsu/haibu-carapace) also contains a plugin system including functionality for things like: chroot, chdir, and even a [http://hook.io](hook.io) bridge.\n\n## Where can I run haibu?\n\n`haibu` doesn't discriminate. If your environment supports node.js, you can install `haibu` and start up your own node.js cloud. This makes `haibu` an ideal tool for both development purposes and production usage since you can seamlessly setup haibu on your local machine, on utility computing providers (such as Amazon EC2 or Rackspace), on dedicated servers, or even on a mobile phone!\n\n# Installation\n\n    [sudo] npm install haibu -g\n\n# An overview of using haibu\n\n## Starting up a haibu\n\n```\n[sudo] node bin/haibu\n(...)\nhaibu started @ 127.0.0.1 on port 9002 as api-server\n```\n\n**Now that there is a haibu server running, we can begin to interact with it's API.**\n\n##Starting an application using the haibu Client\n*(From: /examples/hello-spawn.js)*\n\nAllows you to call haibu programmatically from inside your node.js scripts.\n\n```javascript\nvar eyes = require('eyes'),\n    haibu = require('haibu');\n\n// Create a new client for communicating with the haibu server\nvar client = new haibu.drone.Client({\n  host: 'localhost',\n  port: 9002\n});\n\n// A basic package.json for a node.js application on haibu\nvar app = {\n   \"user\": \"marak\",\n   \"name\": \"test\",\n   \"domain\": \"devjitsu.com\",\n   \"repository\": {\n     \"type\": \"git\",\n     \"url\": \"https://github.com/Marak/hellonode.git\",\n   },\n   \"scripts\": {\n     \"start\": \"server.js\"\n   }\n};\n\n// Attempt to start up a new application\nclient.start(app, function (err, result) {\n  if (err) {\n    console.log('Error spawning app: ' + app.name);\n    return eyes.inspect(err);\n  }\n\n  console.log('Successfully spawned app:');\n  eyes.inspect(result);\n});\n\n\nclient.start(app, function (err, result) {\n  eyes.inspect(err);\n  eyes.inspect(result);\n});\n```\n\n## Push deploy\n\n``` bash\ncd path/to/your/app\ntar -cz . | curl -XPOST -sSNT- localhost:9002/deploy/username/appname\n# or, like this:\ntar -czf app.tgz .\ncurl -XPOST -sSNT app.tgz localhost:9002/deploy/username/appname\n\n```\n> NOTE: you will need to invoke `tar -czf app.tgz .` inside your app's directory\n> else it will add directories inside the tarball that will confuse haibu.\n> haibu only accepts gzip format.\n\nor, programmatically:\n\n``` js\n  var request = require('request')\n    , fs = require('fs');\n    \n  fs.createReadStream(tarball)\n    .pipe(request.put({url: 'http://localhost:9002/deploy/username/appname'}, function (err, res, body) {\n      var result = JSON.parse(body) //app information\n    })\n  \n```\n\n## RESTful Webservice\n\nIf you need to integrate non-node.js systems with haibu, you can use haibu's RESTful JSON API. We recommend using haibu's native Node.js Client, but if you need to integrate with non-node.js systems this is not always a viable option.\n\n**Starting an application through the webservice**\n\n    POST http://127.0.0.1:9002/drones/test/start\n    ...\n    {\n        \"start\": {\n            \"user\": \"marak\",\n            \"name\": \"test\",\n            \"domain\": \"devjitsu.com\",\n            \"repository\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/Marak/hellonode.git\"\n            },\n            \"scripts\": {\n                \"start\": \"server.js\"\n            }\n        }\n    }\n\n **Response**\n\n    HTTP/1.1 200 OK\n    Date: Thu, 05 May 2011 18:15:36 GMT\n    Server: journey/0.4.0\n    Content-Type: application/json\n    Content-Length: 353\n    Connection: close\n    ...\n    {\n        drone: {\n            uid: 'gbE3',\n            ctime: 1304619335818,\n            pid: 7903,\n            foreverPid: 7195,\n            logFile: '/Users/Charlie/.forever/gbE3.log',\n            options: [ '/Users/Charlie/Nodejitsu/haibu/local/marak/test/hellonode/server.js', '127.0.0.1', 8001 ],\n            file: '/Users/Charlie/Nodejitsu/haibu/bin/carapace',\n            pidFile: '/Users/Charlie/.forever/pids/gbE3.pid',\n            port: 8001,\n            host: '127.0.0.1'\n        }\n    }\n\n**Stopping an application through the webservice**\n\n\n    POST http://127.0.0.1:9002/drones/test/stop\n    ...\n    {\n        \"stop\": {\n            \"name\": \"test\"\n        }\n    }\n\n **response**\n\n    HTTP/1.1 200 OK\n    Date: Thu, 05 May 2011 18:16:22 GMT\n    Server: journey/0.4.0\n    Connection: close\n    Transfer-Encoding: chunked\n\n##Package.json settings\n\nHaibu uses a package.json format extension in order to determine what to deploy.\nAlso, haibu is a pull based server; this means that it will pull files from outside of the server in order to deploy instead of using uploading directly into the process.\n\n###Name\n\nThe name attribute is required and will represent the name of the application being deployed.\n\n```json\n{\n  \"name\": \"app-name\"\n}\n```\n\n###User\n\nThe user attribute is required and will represent the user who started up a drone.\n\n```json\n{\n  \"user\": \"myusername\"\n}\n```\n\n###Repositories\n\n#### git\n\nThis type of repository will pull a git repository into haibu and deploy its contents.\n\n```json\n{\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"http://path/to/git/server\"\n  }\n}\n```\n\n#### local\n\nThis type of repository will pull a directory relative to the `haibu` and deploy its contents.\n\n```json\n{\n  \"repository\": {\n    \"type\": \"local\",\n    \"directory\": \"/path/to/application\"\n  }\n}\n```\n\n#### tar\n\nThis type of repository will pull a remote archive relative to the `haibu` and deploy its contents.\n\n```json\n{\n  \"repository\": {\n    \"type\": \"tar\",\n    \"url\": \"http://path/to/archive.tar\"\n  }\n}\n```\n\n#### zip\n\nThis type of repository will pull a remote archive relative to the `haibu` and deploy its contents.\n\n```json\n{\n  \"repository\": {\n    \"type\": \"zip\",\n    \"url\": \"http://path/to/archive.zip\"\n  }\n}\n```\n\n#### npm\n\nThis type of repository will install a npm package as application. The package will be available as directory under its name and the scripts will be installed in the `.bin` directory.\nSo scripts.start should have one of both as relative directory:\n\n```json\n\"scripts\": {\n  \"start\": \".bin/server.js\"\n}\n```\n\nor:\n\n```json\n\"scripts\": {\n  \"start\": \"name of npm package/server.js\"\n}\n```\n\n```json\n{\n  \"repository\": {\n    \"type\": \"npm\",\n    \"package\": \"name of npm package\"\n  }\n}\n```\n\n## Run Tests\nAll of the `haibu` tests are written in [vows][0], and cover all of the use cases described above.\n\n``` bash\n  $ npm test\n```\n\nIf you wish to take advantage of all of the configuration offered in `haibu` through `flatiron` see the sample [test-config.json.example][2] configuration file.\n\n*If you copy and paste the above link, the test suite will attempt to connect to Rackspace for some of the remote file tests. You don't need to run these tests or use Rackspace to get started. We'll be improving our test runner soon to help make this process a bit more intuitive.*\n\n## FAQ\n\n### `jitsu` is not working with `haibu`\n\n`jitsu` is intended to work with the full production stack at Nodejitsu and should not be used with `haibu`.\n\n\n#### Author: [Nodejitsu Inc.](http://www.nodejitsu.com)\n\n[0]: http://vowsjs.org\n[1]: http://github.com/nodejitsu/node-http-proxy\n[2]: https://github.com/nodejitsu/haibu/tree/master/test/fixtures/test-config.json.example\n",
  "_id": "haibu@0.9.7",
  "dist": {
    "shasum": "03a75e102f72a993f26d3483c31b8ed619fcf6ec"
  },
  "_from": "haibu"
}
